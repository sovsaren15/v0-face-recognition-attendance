{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{attendanceAPI,employeeAPI}from\"../services/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[todayAttendance,setTodayAttendance]=useState([]);const[employeeCount,setEmployeeCount]=useState(0);const[loading,setLoading]=useState(true);const[employeeMap,setEmployeeMap]=useState({});useEffect(()=>{fetchDashboardData();},[]);const fetchDashboardData=async()=>{try{const[attendanceRes,employeesRes]=await Promise.all([attendanceAPI.getTodayAttendance(),employeeAPI.getAll()]);if(attendanceRes.success){setTodayAttendance(attendanceRes.attendance||[]);}if(employeesRes.success){setEmployeeCount(employeesRes.employees.length);const map={};employeesRes.employees.forEach(emp=>{map[emp.id]=emp;});setEmployeeMap(map);}setLoading(false);}catch(error){console.error(\"Error fetching dashboard data:\",error);setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-96\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-600 text-sm font-semibold mb-2\",children:\"Total Employees\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-4xl font-bold text-indigo-600\",children:employeeCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-600 text-sm font-semibold mb-2\",children:\"Present Today\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-4xl font-bold text-green-600\",children:todayAttendance.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-gray-600 text-sm font-semibold mb-2\",children:\"Attendance Rate\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-4xl font-bold text-blue-600\",children:[employeeCount>0?Math.round(todayAttendance.length/employeeCount*100):0,\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6 text-gray-800\",children:\"Today's Attendance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b-2 border-gray-200\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-700\",children:\"Employee\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-700\",children:\"Check In\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-700\",children:\"Check Out\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-700\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left font-semibold text-gray-700\",children:\"Time Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:todayAttendance.map(record=>{var _employeeMap$record$e;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-gray-200 hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-800\",children:((_employeeMap$record$e=employeeMap[record.employeeId])===null||_employeeMap$record$e===void 0?void 0:_employeeMap$record$e.name)||\"Unknown\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-600\",children:record.checkIn?new Date(record.checkIn).toLocaleTimeString():\"N/A\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-gray-600\",children:record.checkOut?new Date(record.checkOut).toLocaleTimeString():\"Pending\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-semibold \".concat(record.status===\"completed\"?\"bg-blue-100 text-blue-800\":\"bg-green-100 text-green-800\"),children:record.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:record.timeStatus&&/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-sm font-semibold \".concat(record.timeStatus===\"Late\"?\"bg-red-100 text-red-800\":record.timeStatus===\"Good\"?\"bg-green-100 text-green-800\":\"bg-yellow-100 text-yellow-800\"),children:record.timeStatus})})]},record.id);})})]})}),todayAttendance.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500\",children:\"No attendance records for today.\"})]})]});}export default Dashboard;","map":{"version":3,"names":["useState","useEffect","attendanceAPI","employeeAPI","jsx","_jsx","jsxs","_jsxs","Dashboard","todayAttendance","setTodayAttendance","employeeCount","setEmployeeCount","loading","setLoading","employeeMap","setEmployeeMap","fetchDashboardData","attendanceRes","employeesRes","Promise","all","getTodayAttendance","getAll","success","attendance","employees","length","map","forEach","emp","id","error","console","className","children","Math","round","record","_employeeMap$record$e","employeeId","name","checkIn","Date","toLocaleTimeString","checkOut","concat","status","timeStatus"],"sources":["D:/we_project/face-recognition/v0-face-recognition-attendance/frontend/src/pages/Dashboard.js"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { attendanceAPI, employeeAPI } from \"../services/api\"\r\n\r\nfunction Dashboard() {\r\n  const [todayAttendance, setTodayAttendance] = useState([])\r\n  const [employeeCount, setEmployeeCount] = useState(0)\r\n  const [loading, setLoading] = useState(true)\r\n  const [employeeMap, setEmployeeMap] = useState({})\r\n\r\n  useEffect(() => {\r\n    fetchDashboardData()\r\n  }, [])\r\n\r\n  const fetchDashboardData = async () => {\r\n    try {\r\n      const [attendanceRes, employeesRes] = await Promise.all([\r\n        attendanceAPI.getTodayAttendance(),\r\n        employeeAPI.getAll(),\r\n      ])\r\n\r\n      if (attendanceRes.success) {\r\n        setTodayAttendance(attendanceRes.attendance || [])\r\n      }\r\n\r\n      if (employeesRes.success) {\r\n        setEmployeeCount(employeesRes.employees.length)\r\n        const map = {}\r\n        employeesRes.employees.forEach((emp) => {\r\n          map[emp.id] = emp\r\n        })\r\n        setEmployeeMap(map)\r\n      }\r\n\r\n      setLoading(false)\r\n    } catch (error) {\r\n      console.error(\"Error fetching dashboard data:\", error)\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-96\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Stats */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-gray-600 text-sm font-semibold mb-2\">Total Employees</h3>\r\n          <p className=\"text-4xl font-bold text-indigo-600\">{employeeCount}</p>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-gray-600 text-sm font-semibold mb-2\">Present Today</h3>\r\n          <p className=\"text-4xl font-bold text-green-600\">{todayAttendance.length}</p>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow p-6\">\r\n          <h3 className=\"text-gray-600 text-sm font-semibold mb-2\">Attendance Rate</h3>\r\n          <p className=\"text-4xl font-bold text-blue-600\">\r\n            {employeeCount > 0 ? Math.round((todayAttendance.length / employeeCount) * 100) : 0}%\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Today's Attendance */}\r\n      <div className=\"bg-white rounded-lg shadow-lg p-8\">\r\n        <h2 className=\"text-2xl font-bold mb-6 text-gray-800\">Today's Attendance</h2>\r\n\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead>\r\n              <tr className=\"border-b-2 border-gray-200\">\r\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Employee</th>\r\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Check In</th>\r\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Check Out</th>\r\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Status</th>\r\n                <th className=\"px-4 py-3 text-left font-semibold text-gray-700\">Time Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {todayAttendance.map((record) => (\r\n                <tr key={record.id} className=\"border-b border-gray-200 hover:bg-gray-50\">\r\n                  <td className=\"px-4 py-3 text-gray-800\">{employeeMap[record.employeeId]?.name || \"Unknown\"}</td>\r\n                  <td className=\"px-4 py-3 text-gray-600\">\r\n                    {record.checkIn ? new Date(record.checkIn).toLocaleTimeString() : \"N/A\"}\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-gray-600\">\r\n                    {record.checkOut ? new Date(record.checkOut).toLocaleTimeString() : \"Pending\"}\r\n                  </td>\r\n                  <td className=\"px-4 py-3\">\r\n                    <span\r\n                      className={`px-3 py-1 rounded-full text-sm font-semibold ${\r\n                        record.status === \"completed\" ? \"bg-blue-100 text-blue-800\" : \"bg-green-100 text-green-800\"\r\n                      }`}\r\n                    >\r\n                      {record.status}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-3\">\r\n                    {record.timeStatus && (\r\n                      <span\r\n                        className={`px-3 py-1 rounded-full text-sm font-semibold ${\r\n                          record.timeStatus === \"Late\"\r\n                            ? \"bg-red-100 text-red-800\"\r\n                            : record.timeStatus === \"Good\"\r\n                            ? \"bg-green-100 text-green-800\"\r\n                            : \"bg-yellow-100 text-yellow-800\"\r\n                        }`}\r\n                      >{record.timeStatus}</span>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {todayAttendance.length === 0 && (\r\n          <div className=\"text-center py-8 text-gray-500\">No attendance records for today.</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}